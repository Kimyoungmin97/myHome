<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.home.user.dao.HouseDao">

	<resultMap type="BoardResponse" id="boardResponseMap">
		<id column="post_id" property="postId"/>
		<result column="apt_seq" property="aptSeq"/>
		<result column="username" property="username"/>
		<result column="title" property="title"/>
		<result column="content" property="content"/>
		<result column="isSecret" property="isSecret"/>
	</resultMap>
	
	<select id="getBoardList" parameterType="BoardRequest"  resultMap="boardResponseMap">
		 SELECT p.post_id AS postId
		 	  , p.apt_seq AS aptSeq
		 	  , u.username AS username
		 	  , p.title
		 	  , p.content
		 	  , p.is_secret AS isSecret
		   FROM posts p
		   JOIN users u ON p.user_id = u.user_id
		  WHERE p.apt_seq = #{aptSeq}
		    AND p.is_secret = #{isSecret}
	    <if test="lastPostId != null and lastPostId > 0">
	      	AND p.post_id <![CDATA[ < ]]> #{lastPostId}
	    </if>
		  ORDER BY p.post_id DESC
		  LIMIT 10
	</select>
	
</mapper>